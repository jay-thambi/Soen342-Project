{% extends 'base.html' %}

{% block title %}Create Lesson{% endblock %}

{% block content %}
<h2>Create New Lesson</h2>
<form method="post">
    {{ form.hidden_tag() }}

    <div>
        {{ form.lesson_type.label }}
        {{ form.lesson_type(class="form-control") }}
        {% for error in form.lesson_type.errors %}
            <span class="error">{{ error }}</span>
        {% endfor %}
    </div>

    <div>
        {{ form.location.label }}
        {{ form.location(class="form-control") }}
        {% for error in form.location.errors %}
            <span class="error">{{ error }}</span>
        {% endfor %}
    </div>

    <div>
        {{ form.mode.label }}
        {{ form.mode(class="form-control") }}
        {% for error in form.mode.errors %}
            <span class="error">{{ error }}</span>
        {% endfor %}
    </div>

    <div>
        {{ form.capacity.label }}
        {{ form.capacity(class="form-control", id="capacity") }}
        {% for error in form.capacity.errors %}
            <span class="error">{{ error }}</span>
        {% endfor %}
    </div>

    <div>
        {{ form.start_date.label }}
        {{ form.start_date(class="form-control") }}
        {% for error in form.start_date.errors %}
            <span class="error">{{ error }}</span>
        {% endfor %}
    </div>

    <div>
        {{ form.end_date.label }}
        {{ form.end_date(class="form-control") }}
        {% for error in form.end_date.errors %}
            <span class="error">{{ error }}</span>
        {% endfor %}
    </div>

    <div>
        {{ form.day_of_week.label }}
        {{ form.day_of_week(class="form-control") }}
        {% for error in form.day_of_week.errors %}
            <span class="error">{{ error }}</span>
        {% endfor %}
    </div>

    <div>
        {{ form.start_time.label }}
        {{ form.start_time(class="form-control") }}
        {% for error in form.start_time.errors %}
            <span class="error">{{ error }}</span>
        {% endfor %}
    </div>

    <div>
        {{ form.end_time.label }}
        {{ form.end_time(class="form-control") }}
        {% for error in form.end_time.errors %}
            <span class="error">{{ error }}</span>
        {% endfor %}
    </div>

    <div>
        {{ form.submit(class="btn btn-primary") }}
    </div>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var modeField = document.getElementById('mode');
        var capacityField = document.getElementById('capacity');

        function toggleCapacityField() {
            if (modeField.value === 'private') {
                capacityField.value = 1;
                capacityField.readOnly = true;
            } else {
                capacityField.readOnly = false;
            }
        }

        modeField.addEventListener('change', toggleCapacityField);
        toggleCapacityField(); // Initialize on page load
    });
</script>
{% endblock %}
